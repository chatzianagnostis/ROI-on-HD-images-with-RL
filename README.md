# Environment
Το περιβάλλον `ROIDetectionEnv` είναι ένα προσαρμοσμένο περιβάλλον reinforcement learning (RL), σχεδιασμένο για την τοποθέτηση περιοχών ενδιαφέροντος (ROIs) σε εικόνες. Ακολουθεί την αρχιτεκτονική του `gym.Env` και μοντελοποιεί μια διαδικασία όπου ένας πράκτορας αλληλεπιδρά με εικόνες, μετακινώντας ένα bounding box και επιλέγοντας πού θα τοποθετήσει ή αφαιρέσει περιοχές ενδιαφέροντος.

## Δομή του Περιβάλλοντος

Το περιβάλλον αποτελείται από:

1. Μία εικόνα εισόδου (`self.current_image`), που προέρχεται από ένα dataset.
2. Ένα bounding box (BBox) που ξεκινά από το κέντρο της εικόνας και μπορεί να μετακινηθεί.
3. Μία λίστα με αποθηκευμένα BBoxes (`self.bboxes`) που έχουν τοποθετηθεί από τον πράκτορα.
4. Έναν χώρο ενεργειών (`self.action_space`) που επιτρέπει στον πράκτορα να μετακινήσει το bounding box, να το τοποθετήσει, να αφαιρέσει το τελευταίο που τοποθετήθηκε ή να τερματίσει το επεισόδιο.

## Διαδικασία λειτουργίας
Κάθε επεισόδιο ακολουθεί την παρακάτω ροή:

1. `reset()` – Εκκίνηση νέου επεισοδίου
    - Φορτώνεται μία νέα εικόνα από το dataset.
    - Ο πράκτορας ξεκινά με ένα bounding box στο κέντρο της εικόνας.
    - Επιστρέφεται η αρχική κατάσταση του περιβάλλοντος.

2. `step(action)` – Εκτέλεση ενέργειας
    Ο πράκτορας μπορεί να εκτελέσει μία από τις εξής ενέργειες:

    - Μετακίνηση bounding box (_move_bbox(direction)):
        0: Πάνω
        1: Κάτω
        2: Αριστερά
        3: Δεξιά
    - Τοποθέτηση bounding box (`_place_bbox()`):
        Αν δεν υπάρχει επικάλυψη με άλλο BBox, προστίθεται στη λίστα `self.bboxes` και ο πράκτορας κερδίζει +0.25 πόντους.
        Αν υπάρχει επικάλυψη (IoU > 0.3), δίνεται ποινή -1.
    - Αφαίρεση τελευταίου bounding box (`_remove_bbox()`):
        Αν δεν υπάρχει BBox, δίνεται ποινή -0.1.
        Αν υπάρχει, αφαιρείται χωρίς ποινή.
    - Τερματισμός επεισοδίου (`action == 6`):
        Υπολογίζεται ένα τελικό σκορ (`_calculate_final_reward()`), το οποίο μπορεί να συγκρίνει τις επιλεγμένες περιοχές με το ground truth.


## Παρατήρηση (Observation)
Η παρατήρηση που επιστρέφει το περιβάλλον περιλαμβάνει:

1. Την τρέχουσα εικόνα με τα bounding boxes ζωγραφισμένα επάνω της.
2. Έναν πίνακα (bbox_state) με έως 100 bounding boxes, όπου κάθε ένα αποθηκεύεται ως:
    (x, y, width, height), κανονικοποιημένο στο διάστημα [0,1].


## Ανταμοιβές (Rewards)
- +0.25 για σωστή τοποθέτηση BBox (χωρίς επικάλυψη).
- -1 για τοποθέτηση με επικάλυψη πάνω από 30%.
- 0 για αφαίρεση BBox (ουδέτερο).
- -0.1 για αφαίρεση BBox όταν δεν υπάρχει κανένα.
- Τελική ανταμοιβή.



Τι κάνει πρακτικά αυτό το περιβάλλον;
Εκπαιδεύει έναν πράκτορα να τοποθετεί bounding boxes πάνω σε μια εικόνα με στόχο την ανίχνευση περιοχών ενδιαφέροντος (ROI detection)